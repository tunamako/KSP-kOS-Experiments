//------\\
//---SETI-CTT---\\
//------\\
//---General Settings---\\
//------\\


//------\\
//---MechJeb and Engineer for all---\\
//------\\

@PART[*]:HAS[@MODULE[ModuleCommand]]:NEEDS[MechJeb2]:FOR[zzzzSETIrebalance]
{
	%MODULE[MechJebCore]
	{
		MechJebLocalSettings
		{
			MechJebModuleCustomWindowEditor { unlockTechs = start }
			MechJebModuleSmartASS { unlockTechs = start }
			MechJebModuleManeuverPlanner { unlockTechs = start }
			MechJebModuleNodeEditor { unlockTechs = start }
			MechJebModuleTranslatron { unlockTechs = start }
			MechJebModuleWarpHelper { unlockTechs = start }
			MechJebModuleAttitudeAdjustment { unlockTechs = start }
			MechJebModuleThrustWindow { unlockTechs = start }
			MechJebModuleRCSBalancerWindow { unlockTechs = start }
			MechJebModuleRoverWindow { unlockTechs = start }
			MechJebModuleAscentGuidance { unlockTechs = start }
			MechJebModuleLandingGuidance { unlockTechs = start }
			MechJebModuleSpaceplaneGuidance { unlockTechs = start }
			MechJebModuleDockingGuidance { unlockTechs = start }
			MechJebModuleRendezvousAutopilotWindow { unlockTechs = start }
			MechJebModuleRendezvousGuidance { unlockTechs = start }
		}
	}
}

@PART[mumech_MJ2_AR202]:NEEDS[MechJeb2,!UnmannedBeforeManned]:FOR[zzzzSETIrebalance]
{
    @category = none
}

@PART[Engineer7500|EngineerChip]:NEEDS[KerbalEngineer,!UnmannedBeforeManned]:FOR[zzzzSETIrebalance]
{
    @category = none
}

@PART[*]:HAS[@MODULE[ModuleCommand]]:NEEDS[KerbalEngineer]:FOR[zzzzSETIrebalance]
{
	%MODULE[BuildEngineer] {}
}

@PART[*]:HAS[@MODULE[ModuleCommand]]:NEEDS[KerbalEngineer]:FOR[zzzzSETIrebalance]
{
	%MODULE[FlightEngineer]{}
}




//------\\
//---Hydrogen definition from CRP---\\
//------\\

RESOURCE_DEFINITION
{
	name = Hydrogen
	density = 0.00000008990
	unitCost = 0.000055836
	flowMode = ALL_VESSEL
	transfer = PUMP
	isTweakable = true
}


//------\\
//---Probe Cores---\\
//------\\

//---Basic SAS for every command part
@PART[*]:HAS[~name[RetroMk1inline],~name[mk1pod],@MODULE[ModuleCommand]:HAS[~minimumCrew[0]]]:FOR[SETIrebalance]
{
	%MODULE[ModuleSAS] {}
}


//------\\
//---RCS ISP---\\
//------\\

@PART[*]:HAS[@MODULE[ModuleRCS]:HAS[#resourceName[MonoPropellant]]]:FOR[SETIrebalance]
{
	@MODULE[ModuleRCS]
	{
		!atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 240
			key = 1 100
			key = 4 0.001
		}
	}
}


//------\\
//---Command Modules---\\
//------\\

//---Add EC
@PART[*]:HAS[~name[RetroMk1inline],~name[mk1pod],@MODULE[ModuleCommand],#CrewCapacity[*],~CrewCapacity[0],~author[*RoverDude*]]:NEEDS[TacLifeSupport]:AFTER[TacLifeSupport]:AFTER[SETIrebalance]
{
	@RESOURCE[ElectricCharge]
	{
		@maxAmount = 205
		@maxAmount *= #$/CrewCapacity$
		@maxAmount += 310
		@amount = #$maxAmount$
	}
}
@PART[*]:HAS[~name[RetroMk1inline],@MODULE[ModuleCommand],#CrewCapacity[*],~CrewCapacity[0],~author[*RoverDude*]]:NEEDS[!TacLifeSupport]:AFTER[SETIrebalance]
{
	@RESOURCE[ElectricCharge]
	{
		@maxAmount = 205
		@maxAmount *= #$/CrewCapacity$
		@maxAmount += 310
		@amount = #$maxAmount$
	}
}


//------\\
//---160km Omni Antenna on Probe Cores and Command Pods---\\
//------\\

//---Thank you, Rybec
@PART[*]:HAS[@MODULE[ModuleCommand]]:NEEDS[RemoteTech]:AFTER[RemoteTech]:FOR[SETIrebalance]
{
	%MODULE[ModuleRTAntennaPassive] 
	{
		%TechRequired = None
		%OmniRange = 160000
		
		%TRANSMITTER {
			%PacketInterval = 0.3
			%PacketSize = 2
			%PacketResourceCost = 5.0
		}
	}
}

@PART[*]:HAS[@MODULE[ModuleCommand]]:NEEDS[!RemoteTech,!AntennaRange]:FOR[SETIrebalance]
{
	%MODULE[ModuleDataTransmitter]
	{
		%packetInterval = 0.35
		%packetSize = 2
	
		%packetResourceCost = 12.0
		%requiredResource = ElectricCharge
	}
}

@PART[*]:HAS[@MODULE[ModuleCommand]:HAS[#minimumCrew[0]]]:NEEDS[RemoteTech]:FOR[SETIrebalance]
{
	%MODULE[ModuleSPU] {
		%IsRTCommandStation = true
		%RTCommandMinCrew = 2
	}
}

@PART[*]:HAS[@MODULE[ModuleCommand]:HAS[~minimumCrew[0]]]:NEEDS[RemoteTech]:FOR[SETIrebalance]
{
	%MODULE[ModuleSPUPassive] {}
}

@PART[*]:HAS[@MODULE[KerbalSeat]]:NEEDS[RemoteTech]:FOR[SETIrebalance]
{
	%MODULE[ModuleRTAntennaPassive] 
	{
		%TechRequired = None
		%OmniRange = 24000
		
		%TRANSMITTER {
			%PacketInterval = 0.3
			%PacketSize = 2
			%PacketResourceCost = 5.0
		}
	}
	
	%MODULE[ModuleSPUPassive] {}
}


//------\\
//---Semi-Saturatable Reaction Wheels---\\
//------\\

//---Thank you, Rokanov
@PART[*]:HAS[@MODULE[RWSaturatable]]:NEEDS[RWSaturatable]:AFTER[RWSaturatable]:BEFORE[SETIrebalance]
{
    @MODULE[RWSaturatable],*
    {
        @name = ModuleReactionWheel
    }
}
@PART[*]:HAS[@MODULE[ModuleReactionWheel],!MODULE[RWSaturatable]]:NEEDS[RWSaturatable]:AFTER[SETIrebalance]
{
    @MODULE[ModuleReactionWheel]
    {
        @name = RWSaturatable
        %saturationScale = 10
        !bleedRate,* {}
        bleedRate
        {
            key = 0 0.025 0 0
            key = 1 0.025 0 0
        }
        !torqueCurve,* {}
        torqueCurve
        {
            key = 0 1 -1 -1
            key = 1 0 -1 -1
        }
    }
}


//------\\
//---TweakScale---\\
//------\\

//---Removes TweakScale for parts with crew capacity
@PART[*]:HAS[@MODULE[TweakScale],#CrewCapacity[*],~CrewCapacity[0]]:NEEDS[TweakScale]:AFTER[TweakScale]
{
	!MODULE[TweakScale] {}
}

@PART[*]:HAS[@MODULE[TweakScale],#category[Science]]:NEEDS[TweakScale]:AFTER[TweakScale]
{
    !MODULE[TweakScale] {}
}

@PART[*]:HAS[@MODULE[TweakScale],#category[Pods]]:NEEDS[TweakScale]:AFTER[TweakScale]
{
    !MODULE[TweakScale] {}
}